<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>SOFS11: sofs_inode.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<h1>sofs_inode.h</h1><a href="sofs__inode_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00014"></a>00014 <span class="preprocessor">#ifndef SOFS_INODE_H_</span>
<a name="l00015"></a>00015 <span class="preprocessor"></span><span class="preprocessor">#define SOFS_INODE_H_</span>
<a name="l00016"></a>00016 <span class="preprocessor"></span>
<a name="l00017"></a>00017 <span class="preprocessor">#include &lt;stdint.h&gt;</span>
<a name="l00018"></a>00018 
<a name="l00019"></a>00019 <span class="preprocessor">#include &quot;<a class="code" href="sofs__const_8h.html" title="Definition of basic constants.">sofs_const.h</a>&quot;</span>
<a name="l00020"></a>00020 <span class="preprocessor">#include &quot;<a class="code" href="sofs__datacluster_8h.html" title="Definition of the data cluster data type.">sofs_datacluster.h</a>&quot;</span>
<a name="l00021"></a>00021 
<a name="l00023"></a><a class="code" href="sofs__inode_8h.html#aadb6c866a6d0a173f5f0a6ed9c7e0228">00023</a> <span class="preprocessor">#define IPB (BLOCK_SIZE / sizeof(SOInode))</span>
<a name="l00024"></a>00024 <span class="preprocessor"></span>
<a name="l00026"></a><a class="code" href="sofs__inode_8h.html#a126a931e3d4d7447938f5897d9e5974f">00026</a> <span class="preprocessor">#define NULL_INODE ((uint32_t)(~0UL))</span>
<a name="l00027"></a>00027 <span class="preprocessor"></span>
<a name="l00029"></a><a class="code" href="sofs__inode_8h.html#ab18cc14c3bba6faade76ddd6f018bb41">00029</a> <span class="preprocessor">#define INODE_FREE (1&lt;&lt;12)</span>
<a name="l00030"></a>00030 <span class="preprocessor"></span>
<a name="l00032"></a><a class="code" href="sofs__inode_8h.html#ac91dac7b57d5fd587e5defb077c926bb">00032</a> <span class="preprocessor">#define INODE_DIR (1&lt;&lt;11)</span>
<a name="l00033"></a>00033 <span class="preprocessor"></span>
<a name="l00035"></a><a class="code" href="sofs__inode_8h.html#a5102910257b323d652aa13684891187e">00035</a> <span class="preprocessor">#define INODE_FILE (1&lt;&lt;10)</span>
<a name="l00036"></a>00036 <span class="preprocessor"></span>
<a name="l00038"></a><a class="code" href="sofs__inode_8h.html#a212a3618ff6472099ef7094c9bbf05b3">00038</a> <span class="preprocessor">#define INODE_SYMLINK (1&lt;&lt;9)</span>
<a name="l00039"></a>00039 <span class="preprocessor"></span>
<a name="l00041"></a><a class="code" href="sofs__inode_8h.html#ae5de79aca336e3a253eed8b98c3e39ae">00041</a> <span class="preprocessor">#define INODE_TYPE_MASK (INODE_DIR | INODE_FILE | INODE_SYMLINK)</span>
<a name="l00042"></a>00042 <span class="preprocessor"></span>
<a name="l00044"></a><a class="code" href="sofs__inode_8h.html#aba312c3d420e70bfebf04c9f5d36640d">00044</a> <span class="preprocessor">#define INODE_RD_USR (0400)</span>
<a name="l00045"></a>00045 <span class="preprocessor"></span>
<a name="l00047"></a><a class="code" href="sofs__inode_8h.html#a17d69a80ca67eebaa91764e03e7e722a">00047</a> <span class="preprocessor">#define INODE_WR_USR (0200)</span>
<a name="l00048"></a>00048 <span class="preprocessor"></span>
<a name="l00050"></a><a class="code" href="sofs__inode_8h.html#a596198ac7074f059648f556d5d94f884">00050</a> <span class="preprocessor">#define INODE_EX_USR (0100)</span>
<a name="l00051"></a>00051 <span class="preprocessor"></span>
<a name="l00053"></a><a class="code" href="sofs__inode_8h.html#ac580582613367c363fb8e83bd7fc2bda">00053</a> <span class="preprocessor">#define INODE_RD_GRP (0040)</span>
<a name="l00054"></a>00054 <span class="preprocessor"></span>
<a name="l00056"></a><a class="code" href="sofs__inode_8h.html#a71248ff0d42b6bb2e2be23e75e2055fc">00056</a> <span class="preprocessor">#define INODE_WR_GRP (0020)</span>
<a name="l00057"></a>00057 <span class="preprocessor"></span>
<a name="l00059"></a><a class="code" href="sofs__inode_8h.html#a8bf55e2ff68f7ad07712b82c460add30">00059</a> <span class="preprocessor">#define INODE_EX_GRP (0010)</span>
<a name="l00060"></a>00060 <span class="preprocessor"></span>
<a name="l00062"></a><a class="code" href="sofs__inode_8h.html#ad69534484049a54921ee4d42d831a15a">00062</a> <span class="preprocessor">#define INODE_RD_OTH (0004)</span>
<a name="l00063"></a>00063 <span class="preprocessor"></span>
<a name="l00065"></a><a class="code" href="sofs__inode_8h.html#acdf675dcd0621eb0ed3c87ca72eeac56">00065</a> <span class="preprocessor">#define INODE_WR_OTH (0002)</span>
<a name="l00066"></a>00066 <span class="preprocessor"></span>
<a name="l00068"></a><a class="code" href="sofs__inode_8h.html#a444c4a53136790d7ede54658d7381c68">00068</a> <span class="preprocessor">#define INODE_EX_OTH (0001)</span>
<a name="l00069"></a>00069 <span class="preprocessor"></span>
<a name="l00071"></a><a class="code" href="sofs__inode_8h.html#a30dda5e1ae12ca810465461afe868e89">00071</a> <span class="preprocessor">#define N_DIRECT (7)</span>
<a name="l00072"></a>00072 <span class="preprocessor"></span>
<a name="l00074"></a><a class="code" href="sofs__inode_8h.html#ab0dd828559595268b05668188b5785bd">00074</a> <span class="preprocessor">#define MAX_FILE_CLUSTERS (N_DIRECT + RPC + (RPC * RPC))</span>
<a name="l00075"></a>00075 <span class="preprocessor"></span>
<a name="l00077"></a><a class="code" href="sofs__inode_8h.html#a649ad5274d988d17a275a3cead056746">00077</a> <span class="preprocessor">#define MAX_FILE_SIZE (BSLPC * MAX_FILE_CLUSTERS)</span>
<a name="l00078"></a>00078 <span class="preprocessor"></span>
<a name="l00080"></a><a class="code" href="sofs__inode_8h.html#aee6a69c34fb9691104d284d8bf94331c">00080</a> <span class="preprocessor">#define MAX_CLUSTER_COUNT (MAX_FILE_CLUSTERS + 2 + RPC)</span>
<a name="l00081"></a>00081 <span class="preprocessor"></span>
<a name="l00090"></a><a class="code" href="unioninode_first.html">00090</a>     <span class="keyword">union </span><a class="code" href="unioninode_first.html" title="Different interpretations for the variable context of the inode depending on the...">inodeFirst</a>
<a name="l00091"></a>00091     {
<a name="l00093"></a><a class="code" href="unioninode_first.html#a351d4469a875fcf02d73fcfa176d1cc6">00093</a>       uint32_t <a class="code" href="unioninode_first.html#a351d4469a875fcf02d73fcfa176d1cc6" title="if the inode is in use, time of last file access">atime</a>;
<a name="l00095"></a><a class="code" href="unioninode_first.html#a9b4556b86497af3cd53528515556b0f3">00095</a>       uint32_t <a class="code" href="unioninode_first.html#a9b4556b86497af3cd53528515556b0f3" title="if the inode is free, reference to the next inode in the double-linked list of free...">next</a>;
<a name="l00096"></a>00096     };
<a name="l00097"></a>00097 
<a name="l00106"></a><a class="code" href="unioninode_second.html">00106</a>         <span class="keyword">union </span><a class="code" href="unioninode_second.html" title="Different interpretations for the variable context of the inode depending on the...">inodeSecond</a>
<a name="l00107"></a>00107         {
<a name="l00109"></a><a class="code" href="unioninode_second.html#a30a7788eaa5f5507571880aeabc953e1">00109</a>           uint32_t <a class="code" href="unioninode_second.html#a30a7788eaa5f5507571880aeabc953e1" title="if the inode is in use, time of last file modification">mtime</a>;
<a name="l00111"></a><a class="code" href="unioninode_second.html#abdf8ad43fa71744277d8f91684a6f2ed">00111</a>           uint32_t <a class="code" href="unioninode_second.html#abdf8ad43fa71744277d8f91684a6f2ed" title="if the inode is free, reference to the previous inode in the double-linked list of...">prev</a>;
<a name="l00112"></a>00112         };
<a name="l00113"></a>00113 
<a name="l00127"></a><a class="code" href="structso_inode.html">00127</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structso_inode.html" title="Definition of the inode data type.">soInode</a>
<a name="l00128"></a>00128 {
<a name="l00140"></a><a class="code" href="structso_inode.html#af294e94ca5176720ef5e5cbedc95ca47">00140</a>     uint16_t <a class="code" href="structso_inode.html#af294e94ca5176720ef5e5cbedc95ca47" title="inode mode: it stores the file type (either a regular file, a directory or a symbolic...">mode</a>;
<a name="l00142"></a><a class="code" href="structso_inode.html#abe6fd99d67aa36aa20dfa52ab354d9bb">00142</a>     uint16_t <a class="code" href="structso_inode.html#abe6fd99d67aa36aa20dfa52ab354d9bb" title="reference count: number of hard links (directory entries) associated to the inode...">refcount</a>;
<a name="l00144"></a><a class="code" href="structso_inode.html#a110a9f93ec5f0655ba1aef5afb020e3c">00144</a>     uint32_t <a class="code" href="structso_inode.html#a110a9f93ec5f0655ba1aef5afb020e3c" title="user ID of the file owner">owner</a>;
<a name="l00146"></a><a class="code" href="structso_inode.html#a0d20c78ce80e301ed514bd4b4dec9ec0">00146</a>     uint32_t <a class="code" href="structso_inode.html#a0d20c78ce80e301ed514bd4b4dec9ec0" title="group ID of the file owner">group</a>;
<a name="l00149"></a><a class="code" href="structso_inode.html#ab2c6b258f02add8fdf4cfc7c371dd772">00149</a>     uint32_t <a class="code" href="structso_inode.html#ab2c6b258f02add8fdf4cfc7c371dd772" title="file size in bytes: the farthest position from the beginning of the file information...">size</a>;
<a name="l00153"></a><a class="code" href="structso_inode.html#ac853c498e3d5d78d0a6cca3cafb9dfb3">00153</a>     uint32_t <a class="code" href="structso_inode.html#ac853c498e3d5d78d0a6cca3cafb9dfb3" title="cluster count: total number of data clusters attached to the file (this means both...">clucount</a>;
<a name="l00154"></a>00154 
<a name="l00156"></a><a class="code" href="structso_inode.html#a2a474b9dabdd160e823edcdebc46f17f">00156</a>     <span class="keyword">union </span><a class="code" href="unioninode_first.html" title="Different interpretations for the variable context of the inode depending on the...">inodeFirst</a> <a class="code" href="structso_inode.html#a2a474b9dabdd160e823edcdebc46f17f" title="variable context of type 1 depending on the inode status: in use/free">vD1</a>;
<a name="l00158"></a><a class="code" href="structso_inode.html#a3c7f4d01ded4958d969748a9123de9b2">00158</a>     <span class="keyword">union </span><a class="code" href="unioninode_second.html" title="Different interpretations for the variable context of the inode depending on the...">inodeSecond</a> <a class="code" href="structso_inode.html#a3c7f4d01ded4958d969748a9123de9b2" title="variable context of type 2 depending on the inode status: in use/free">vD2</a>;
<a name="l00159"></a>00159 
<a name="l00161"></a><a class="code" href="structso_inode.html#afa949766e7df5a6843136cd24bba570f">00161</a>     uint32_t <a class="code" href="structso_inode.html#afa949766e7df5a6843136cd24bba570f" title="direct references to the data clusters that comprise the file information content...">d</a>[<a class="code" href="sofs__inode_8h.html#a30dda5e1ae12ca810465461afe868e89" title="direct block references in the inode">N_DIRECT</a>];
<a name="l00164"></a><a class="code" href="structso_inode.html#a3e5dec064fb5b002d1279f3a82ce8646">00164</a>     uint32_t <a class="code" href="structso_inode.html#a3e5dec064fb5b002d1279f3a82ce8646" title="reference to the data cluster that holds the next group of direct references to the...">i1</a>;
<a name="l00167"></a><a class="code" href="structso_inode.html#a46199b2ccc22981c9582e98fcb9ec416">00167</a>     uint32_t <a class="code" href="structso_inode.html#a46199b2ccc22981c9582e98fcb9ec416" title="reference to the data cluster that holds an array of indirect references holding...">i2</a>;
<a name="l00168"></a>00168 } <a class="code" href="structso_inode.html" title="Definition of the inode data type.">SOInode</a>;
<a name="l00169"></a>00169 
<a name="l00170"></a>00170 <span class="preprocessor">#endif </span><span class="comment">/* SOFS_INODE_H_ */</span>
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
